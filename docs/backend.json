
{
  "entities": {
    "Runbook": {
      "title": "Runbook",
      "type": "object",
      "description": "Represents a standardized operational procedure.",
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string" },
        "icon": { "type": "string" }
      },
      "required": ["id", "title", "description", "category", "icon"]
    },
    "SystemHealth": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SystemHealth",
      "type": "object",
      "description": "Represents the health status of the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the system health record."
        },
        "uptime": {
          "type": "number",
          "description": "System uptime in seconds."
        },
        "healthy": {
          "type": "boolean",
          "description": "Indicates whether the system is in a healthy state."
        },
        "degraded": {
          "type": "boolean",
          "description": "Indicates whether the system is in a degraded state."
        },
        "down": {
          "type": "boolean",
          "description": "Indicates whether the system is down."
        },
        "unknown": {
          "type": "boolean",
          "description": "Indicates whether the system status is unknown."
        },
        "activeOperations": {
          "type": "number",
          "description": "Number of active operations."
        },
        "failures": {
          "type": "number",
          "description": "Number of failures."
        },
        "connectedServices": {
          "type": "number",
          "description": "Number of connected services."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of the health record.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "uptime",
        "healthy",
        "degraded",
        "down",
        "unknown",
        "activeOperations",
        "failures",
        "connectedServices",
        "timestamp"
      ]
    },
    "AuditLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AuditLog",
      "type": "object",
      "description": "Represents an audit log entry.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the audit log entry."
        },
        "ts": {
          "type": "string",
          "description": "Timestamp of the event.",
          "format": "date-time"
        },
        "severity": {
          "type": "string",
          "description": "Severity level of the event (e.g., INFO, WARNING, ERROR)."
        },
        "action": {
          "type": "string",
          "description": "Log message."
        },
        "actor": {
          "type": "object",
          "properties": {
            "id": { "type": "string"},
            "type": { "type": "string", "enum": ["user", "service", "automation"]},
            "name": { "type": "string"},
            "email": { "type": "string"}
          }
        },
        "service": {
          "type": "string",
          "description": "Reference to Service. (Relationship: Service 1:N AuditLog)"
        },
        "result": {
          "type": "string",
          "enum": ["success", "fail"]
        },
        "env": {
          "type": "string",
          "enum": ["dev", "stg", "prod"]
        },
        "tool": {
          "type": "string"
        },
        "resource": {
          "type": "object",
          "properties": {
            "type": { "type": "string"},
            "id": { "type": "string"},
            "name": { "type": "string"}
          }
        }
      },
      "required": [
        "id",
        "ts",
        "severity",
        "action",
        "actor"
      ]
    },
    "FavoriteAction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FavoriteAction",
      "type": "object",
      "description": "Represents a user's saved favorite action.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the favorite action."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N FavoriteAction)"
        },
        "tool": {
          "type": "string",
          "description": "The name of the tool."
        },
        "args": {
          "type": "object",
          "description": "The arguments for the tool."
        },
        "prompt": {
            "type": "string",
            "description": "The natural language prompt."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp when the action was saved as a favorite.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "tool",
        "timestamp"
      ]
    },
    "Team": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Team",
      "type": "object",
      "description": "Represents a team within the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the team."
        },
        "name": {
          "type": "string",
          "description": "Name of the team."
        },
        "description": {
          "type": "string",
          "description": "Description of the team's purpose."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "teamId": {
          "type": "string",
          "description": "Reference to Team. (Relationship: Team 1:N User). Team the user belongs to."
        },
        "roleId": {
          "type": "string",
          "description": "Reference to Role. (Relationship: Role 1:N User). User's role within the team."
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "Role": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Role",
      "type": "object",
      "description": "Represents a role within the application (e.g., Admin, Developer, Viewer).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the role."
        },
        "name": {
          "type": "string",
          "description": "Name of the role."
        },
        "permissions": {
          "type": "array",
          "description": "List of permissions associated with this role.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a service within the system.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "status": { "type": "string", "enum": ["healthy", "degraded", "down", "unknown"] },
        "performance": { "type": "array", "items": { "type": "number" } },
        "icon": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "lastSuccess": { "type": "string" },
        "runCount": { "type": "number" },
        "p95_ms": { "type": "number" },
        "err_rate_pct": { "type": "number" },
        "rps": { "type": "number" },
        "commit": { "type": "string" }
      },
      "required": ["id", "name", "status"]
    },
    "Connection": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Connection",
      "type": "object",
      "description": "Represents a connection to an external system or service.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "providerId": { "type": "string" },
        "env": { "type": "string", "enum": ["dev", "staging", "prod"] },
        "status": { "type": "string", "enum": ["active", "warning", "error", "pending", "paused"] },
        "scopes": { "type": "array", "items": { "type": "string" } },
        "secretRef": { "type": "string" },
        "webhook": {
          "type": "object",
          "properties": {
            "endpoint": { "type": "string" },
            "secret": { "type": "string" },
            "lastDeliveries": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": { "type": "string" },
                  "status": { "type": "number" },
                  "ms": { "type": "number" },
                  "ts": { "type": "string" }
                }
              }
            }
          }
        },
        "usage7d": { "type": "array", "items": { "type": "number" } },
        "health": {
          "type": "object",
          "properties": {
            "lastSyncISO": { "type": "string" },
            "latencyP95": { "type": "number" },
            "error24h": { "type": "number" },
            "quotaUsedPct": { "type": "number" }
          }
        },
        "lastRotatedISO": { "type": "string" },
        "lastTests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "pass": { "type": "boolean" },
              "fixAction": { "type": "string" }
            }
          }
        }
      },
      "required": ["id", "name", "providerId", "env", "status"]
    },
    "BillingSummary": {
      "title": "BillingSummary",
      "type": "object",
      "description": "Represents the overall billing summary.",
      "properties": {
        "id": { "type": "string" },
        "mtdCost": { "type": "number" },
        "forecastedCost": { "type": "number" },
        "budget": { "type": "number" }
      },
      "required": ["id", "mtdCost", "forecastedCost", "budget"]
    },
    "CostByService": {
      "title": "CostByService",
      "type": "object",
      "description": "Represents the cost breakdown by service.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "cost": { "type": "number" }
      },
      "required": ["id", "name", "cost"]
    },
    "RecentCharge": {
      "title": "RecentCharge",
      "type": "object",
      "description": "Represents a single recent charge.",
      "properties": {
        "id": { "type": "string" },
        "description": { "type": "string" },
        "amount": { "type": "number" },
        "date": { "type": "string", "format": "date" }
      },
      "required": ["id", "description", "amount", "date"]
    },
    "Incident": {
        "title": "Incident",
        "type": "object",
        "description": "Represents an incident.",
        "properties": {
            "id": { "type": "string" },
            "title": { "type": "string" },
            "status": { "type": "string", "enum": ["investigating", "identified", "monitoring", "resolved"] },
            "priority": { "type": "string", "enum": ["P1", "P2", "P3", "P4"] },
            "services": { "type": "array", "items": { "type": "string" } },
            "time": { "type": "string" }
        },
        "required": ["id", "title", "status", "priority", "services", "time"]
    },
    "Tool": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tool",
      "type": "object",
      "description": "Represents an executable tool in the MCP system.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" },
        "input_schema": { "type": "object" }
      },
      "required": ["id", "name"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "/runbooks/{runbookId}": {
        "schema": { "$ref": "#/entities/Runbook" },
        "description": "Stores runbook definitions."
    },
    "/systemHealth/{healthId}": {
        "schema": { "$ref": "#/entities/SystemHealth" },
        "description": "Stores system health records. Supports real-time updates for the health dashboard."
    },
    "/auditLogs/{logId}": {
        "schema": { "$ref": "#/entities/AuditLog" },
        "description": "Stores audit log entries. Supports real-time updates for the audit log."
    },
    "/users/{userId}/favoriteActions/{actionId}": {
        "schema": { "$ref": "#/entities/FavoriteAction" },
        "description": "Stores user's favorite actions. Path-based ownership ensures only the user can access their favorite actions."
    },
    "/teams/{teamId}": {
        "schema": { "$ref": "#/entities/Team" },
        "description": "Stores team information."
    },
    "/users/{userId}": {
        "schema": { "$ref": "#/entities/User" },
        "description": "Stores user information."
    },
    "/roles/{roleId}": {
        "schema": { "$ref": "#/entities/Role" },
        "description": "Stores role information (Admin, Developer, Viewer)."
    },
    "/services/{serviceId}": {
        "schema": { "$ref": "#/entities/Service" },
        "description": "Stores service data. Supports dynamic updates for the Services Grid."
    },
    "/connections/{connectionId}": {
        "schema": { "$ref": "#/entities/Connection" },
        "description": "Stores connection data. Supports dynamic updates for Bridge Configuration."
    },
    "/billingSummary/{summaryId}": {
      "schema": { "$ref": "#/entities/BillingSummary" },
      "description": "Stores the overall billing summary."
    },
    "/costByService/{serviceCostId}": {
      "schema": { "$ref": "#/entities/CostByService" },
      "description": "Stores the cost breakdown by service."
    },
    "/recentCharges/{chargeId}": {
      "schema": { "$ref": "#/entities/RecentCharge" },
      "description": "Stores recent billing charges."
    },
    "/incidents/{incidentId}": {
        "schema": { "$ref": "#/entities/Incident" },
        "description": "Stores incident data."
    },
    "/tools/{toolId}": {
        "schema": { "$ref": "#/entities/Tool" },
        "description": "Stores tool definitions for the Actions page."
    }
  }
}

    